<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quiz App</title>

  <style>
   
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif;
  background: #f0f2f5;
  display: flex;
  justify-content: center;
  padding: 20px;
}

/* ===== MAIN CONTAINER ===== */

.quiz-box {
  background: white;
  width: 100%;
  max-width: 520px;
  border-radius: 14px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.08);
  padding: 15px;
}

/* ===== STICKY HEADER ===== */

#timer {
  position: sticky;
  top: 0;
  background: white;
  padding: 12px;
  font-weight: bold;
  font-size: 18px;
  color: #e63946;
  text-align: center;
  border-bottom: 1px solid #eee;
  z-index: 10;
}

/* ===== NAME INPUT ===== */

input[type="text"] {
  width: 100%;
  padding: 12px;
  margin: 10px 0 15px 0;
  border-radius: 10px;
  border: 1px solid #ddd;
  font-size: 15px;
  outline: none;
}

input[type="text"]:focus {
  border-color: #457b9d;
}

/* ===== QUESTION CARD ===== */

.question {
  background: #fafafa;
  border: 1px solid #eee;
  border-radius: 12px;
  padding: 12px;
  margin-bottom: 12px;
  transition: 0.2s;
}

.question:hover {
  box-shadow: 0 4px 10px rgba(0,0,0,0.05);
}

.question p {
  font-weight: 600;
  margin-bottom: 10px;
  font-size: 15px;
}

/* ===== OPTIONS ===== */

label {
  display: block;
  padding: 8px 10px;
  border-radius: 8px;
  margin-bottom: 6px;
  cursor: pointer;
  transition: 0.15s;
  border: 1px solid transparent;
}

label:hover {
  background: #edf6f9;
  border-color: #dceef5;
}

input[type="radio"] {
  margin-right: 8px;
  transform: scale(1.1);
}

/* ===== BUTTON ===== */

button {
  width: 100%;
  padding: 14px;
  margin-top: 10px;
  border: none;
  border-radius: 10px;
  background: #1d3557;
  color: white;
  font-size: 16px;
  font-weight: bold;
  cursor: pointer;
  transition: 0.2s;
}

button:hover {
  background: #16324f;
}

/* ===== RESULT TEXT ===== */

#result {
  margin-top: 15px;
  text-align: center;
  font-weight: bold;
  font-size: 16px;
  color: #2a9d8f;
}

/* ===== MOBILE TUNING ===== */

@media (max-width: 600px) {

  body {
    padding: 10px;
  }

  .quiz-box {
    border-radius: 10px;
    padding: 10px;
  }

  #timer {
    font-size: 16px;
    padding: 10px;
  }

  .question p {
    font-size: 14px;
  }

  label {
    font-size: 14px;
  }

  button {
    font-size: 15px;
  }
}
    #loadingOverlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  backdrop-filter: blur(6px);
  background: rgba(255, 255, 255, 0.6);
  display: none;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  z-index: 9999;
}

.loader {
  width: 50px;
  height: 50px;
  border: 5px solid #ddd;
  border-top: 5px solid #1d3557;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin-bottom: 10px;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

#loadingOverlay p {
  font-size: 16px;
  font-weight: bold;
  color: #1d3557;
}
  </style>
</head>
<body>

  <!-- âœ… LOADING OVERLAY -->
<div id="loadingOverlay">
  <div class="loader"></div>
  <p>Submitting Test...</p>
</div>

<div class="quiz-box">
  <h2>PSI Wireless Mocktest-1</h2>

  <!-- âœ… NAME INPUT -->
  <input type="text" id="username" placeholder="Enter your Full name">

  <div id="timer">Time: 15 Minutes </div>
  <form id="quizForm"></form>
  <button id="submitBtn">Submit Quiz</button>
  <div id="result"></div>
</div>

<!-- âœ… XML QUESTIONS (Editable) -->
<script id="quizData" type="text/xml">
<quiz>

  <question>
    <text>Which device converts AC to DC?</text>
    <option correct="false">Oscillator</option>
    <option correct="true">Rectifier</option>
    <option correct="false">Amplifier</option>
    <option correct="false">Modulator</option>
  </question>

  <question>
    <text>Which modulation varies carrier frequency?</text>
    <option correct="false">AM</option>
    <option correct="true">FM</option>
    <option correct="false">PM</option>
    <option correct="false">PCM</option>
  </question>

  <question>
    <text>Unit of antenna gain is?</text>
    <option correct="false">Ohm</option>
    <option correct="false">Watt</option>
    <option correct="true">dB</option>
    <option correct="false">Volt</option>
  </question>

  <question>
    <text>Which layer handles routing in OSI model?</text>
    <option correct="false">Transport</option>
    <option correct="true">Network</option>
    <option correct="false">Session</option>
    <option correct="false">Data Link</option>
  </question>

  <question>
    <text>Which logic gate outputs HIGH only when all inputs HIGH?</text>
    <option correct="true">AND</option>
    <option correct="false">OR</option>
    <option correct="false">XOR</option>
    <option correct="false">NOT</option>
  </question>

  <question>
    <text>Which parameter represents signal strength reduction?</text>
    <option correct="true">Attenuation</option>
    <option correct="false">Amplification</option>
    <option correct="false">Reflection</option>
    <option correct="false">Resonance</option>
  </question>

  <question>
    <text>Typical impedance of RF systems?</text>
    <option correct="false">10 Ohm</option>
    <option correct="true">50 Ohm</option>
    <option correct="false">500 Ohm</option>
    <option correct="false">5 Ohm</option>
  </question>

  <question>
    <text>Which noise is temperature dependent?</text>
    <option correct="true">Thermal noise</option>
    <option correct="false">Impulse noise</option>
    <option correct="false">Shot noise</option>
    <option correct="false">Atmospheric noise</option>
  </question>

  <question>
    <text>Which device stores binary data?</text>
    <option correct="false">Diode</option>
    <option correct="false">Resistor</option>
    <option correct="true">Flip-Flop</option>
    <option correct="false">Transformer</option>
  </question>

  <question>
    <text>Which frequency band used in Wi-Fi?</text>
    <option correct="false">30 MHz</option>
    <option correct="true">2.4 GHz</option>
    <option correct="false">10 kHz</option>
    <option correct="false">1 Hz</option>
  </question>

  <question>
    <text>Which wave propagation uses ionosphere?</text>
    <option correct="false">Ground wave</option>
    <option correct="true">Sky wave</option>
    <option correct="false">Line of sight</option>
    <option correct="false">Surface wave</option>
  </question>

  <question>
    <text>Which device increases signal power?</text>
    <option correct="false">Filter</option>
    <option correct="true">Amplifier</option>
    <option correct="false">Detector</option>
    <option correct="false">Mixer</option>
  </question>

  <question>
    <text>Binary system base is?</text>
    <option correct="true">2</option>
    <option correct="false">8</option>
    <option correct="false">10</option>
    <option correct="false">16</option>
  </question>

  <question>
    <text>Which modulation used for analog audio broadcasting?</text>
    <option correct="false">PCM</option>
    <option correct="true">FM</option>
    <option correct="false">QAM</option>
    <option correct="false">ASK</option>
  </question>

  <question>
    <text>Which component blocks DC but passes AC?</text>
    <option correct="true">Capacitor</option>
    <option correct="false">Inductor</option>
    <option correct="false">Resistor</option>
    <option correct="false">Battery</option>
  </question>

  <question>
    <text>Which digital modulation varies amplitude?</text>
    <option correct="true">ASK</option>
    <option correct="false">FSK</option>
    <option correct="false">PSK</option>
    <option correct="false">QPSK</option>
  </question>

  <question>
    <text>Full form of LTE?</text>
    <option correct="true">Long Term Evolution</option>
    <option correct="false">Low Transmission Energy</option>
    <option correct="false">Linear Time Encoding</option>
    <option correct="false">Long Transfer Element</option>
  </question>

  <question>
    <text>Which device isolates circuits magnetically?</text>
    <option correct="false">Diode</option>
    <option correct="true">Transformer</option>
    <option correct="false">Capacitor</option>
    <option correct="false">Relay</option>
  </question>

  <question>
    <text>Which phenomenon causes signal bending?</text>
    <option correct="false">Reflection</option>
    <option correct="true">Refraction</option>
    <option correct="false">Absorption</option>
    <option correct="false">Polarization</option>
  </question>

  <question>
    <text>Which coding detects errors?</text>
    <option correct="false">Encryption</option>
    <option correct="true">Parity bit</option>
    <option correct="false">Multiplexing</option>
    <option correct="false">Sampling</option>
  </question>

  <question>
    <text>Which device generates periodic signals?</text>
    <option correct="true">Oscillator</option>
    <option correct="false">Rectifier</option>
    <option correct="false">Detector</option>
    <option correct="false">Transducer</option>
  </question>

  <question>
    <text>Which protocol used for web?</text>
    <option correct="true">HTTP</option>
    <option correct="false">FTP</option>
    <option correct="false">SMTP</option>
    <option correct="false">SNMP</option>
  </question>

  <question>
    <text>Which unit measures bandwidth?</text>
    <option correct="false">Volt</option>
    <option correct="true">Hertz</option>
    <option correct="false">Ohm</option>
    <option correct="false">Tesla</option>
  </question>

  <question>
    <text>Which device converts electrical to RF energy?</text>
    <option correct="true">Antenna</option>
    <option correct="false">Filter</option>
    <option correct="false">Battery</option>
    <option correct="false">Resistor</option>
  </question>

  <question>
    <text>Which logic family consumes least power?</text>
    <option correct="false">TTL</option>
    <option correct="true">CMOS</option>
    <option correct="false">ECL</option>
    <option correct="false">RTL</option>
  </question>

  <question>
    <text>Which multiplexing uses time slots?</text>
    <option correct="false">FDM</option>
    <option correct="true">TDM</option>
    <option correct="false">CDM</option>
    <option correct="false">SDM</option>
  </question>

  <question>
    <text>Which parameter defines cycles per second?</text>
    <option correct="true">Frequency</option>
    <option correct="false">Amplitude</option>
    <option correct="false">Phase</option>
    <option correct="false">Gain</option>
  </question>

  <question>
    <text>Which device prevents reverse current?</text>
    <option correct="true">Diode</option>
    <option correct="false">Inductor</option>
    <option correct="false">Capacitor</option>
    <option correct="false">Fuse</option>
  </question>

  <question>
    <text>Which propagation suitable for VHF/UHF?</text>
    <option correct="false">Sky wave</option>
    <option correct="true">Line of sight</option>
    <option correct="false">Ground wave</option>
    <option correct="false">Surface wave</option>
  </question>

  <question>
    <text>Which term indicates unwanted signals?</text>
    <option correct="true">Noise</option>
    <option correct="false">Carrier</option>
    <option correct="false">Bandwidth</option>
    <option correct="false">Modulation</option>
  </question>

</quiz>
</script>

<script>

const EXAM_START = new Date("2026-02-19T22:00:00"); 
// ðŸ‘† Apna exam date/time

const EXAM_DURATION_SECONDS = 900; 
// 10800 = 3 hours


function startPreExamCountdown() {
  const interval = setInterval(() => {
    const now = new Date();
    const diff = EXAM_START - now;

    if (diff <= 0) {
      clearInterval(interval);
      document.body.innerHTML = ""; // Clear countdown screen

      loadQuizFromXML();
      startTimer();
      return;
    }

    const hours = Math.floor(diff / (1000 * 60 * 60));
    const minutes = Math.floor((diff / (1000 * 60)) % 60);
    const seconds = Math.floor((diff / 1000) % 60);

    document.body.innerHTML = `
      <div style="
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        font-family: Arial;
        background: #f0f2f5;
      ">
        <h2>Exam Starts In</h2>
        <div style="
          font-size: 40px;
          font-weight: bold;
          color: red;
          margin-top: 10px;
        ">
          ${String(hours).padStart(2,'0')} :
          ${String(minutes).padStart(2,'0')} :
          ${String(seconds).padStart(2,'0')}
        </div>
      </div>
    `;
  }, 1000);
}

function checkExamTime() {
  const now = new Date();

  if (now < EXAM_START) {
    document.body.innerHTML = `
      <div style="text-align:center; padding-top:50px; font-family:Arial;">
        <h2>Quiz Not Started</h2>
        <p>Exam will start at:</p>
        <b>${EXAM_START}</b>
      </div>
    `;
    return false;
  }

  return true;
}


/* ================= CONFIG ================= */


// ðŸ‘† Yaha apna date & time set karo


const QUIZ_TIME_SECONDS = 900; // â± Change timer here
const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxJdMp_3SIPVI5L5kIJAsbkp3T9LdG1JkzIdOKO6WET1RBX2EJI3L4or2VVkXWX0wLF/exec"; 
// ðŸ”— Paste Apps Script Web App URL here

/* ========================================== */

let questions = [];
let timeLeft = EXAM_DURATION_SECONDS;
let timerInterval;

function loadQuizFromXML() {
  const xmlText = document.getElementById("quizData").textContent;
  const parser = new DOMParser();
  const xml = parser.parseFromString(xmlText, "text/xml");

  const qNodes = xml.querySelectorAll("question");
  const form = document.getElementById("quizForm");

  qNodes.forEach((qNode, index) => {
    const text = qNode.querySelector("text").textContent;
    const options = qNode.querySelectorAll("option");

    const qObj = { text: text, options: [] };

    const div = document.createElement("div");
    div.className = "question";
    div.innerHTML += `<p>${index + 1}. ${text}</p>`;

    options.forEach((optNode, i) => {
      const optText = optNode.textContent;
      const isCorrect = optNode.getAttribute("correct") === "true";

      qObj.options.push({ text: optText, correct: isCorrect });

      div.innerHTML += `
        <label>
          <input type="radio" name="q${index}" value="${i}">
          ${optText}
        </label><br>
      `;
    });

    questions.push(qObj);
    form.appendChild(div);
  });
}

function startTimer() {
  timerInterval = setInterval(() => {
    timeLeft--;

    const minutes = String(Math.floor(timeLeft / 60)).padStart(2, '0');
    const seconds = String(timeLeft % 60).padStart(2, '0');

    document.getElementById("timer").textContent =
      `Time: ${minutes}:${seconds}`;

    if (timeLeft <= 0) {
      clearInterval(timerInterval);
      submitQuiz(true);
    }
  }, 1000);
}

function calculateScore() {
  let score = 0;

  questions.forEach((q, index) => {
    const selected = document.querySelector(`input[name="q${index}"]:checked`);
    if (!selected) return;

    if (q.options[selected.value].correct) score++;
  });

  return score;
}

async function sendToGoogleSheet(name, score) {
  if (!GOOGLE_SCRIPT_URL.includes("http")) return;

  const payload = { name: name, score: score };

  try {
    await fetch(GOOGLE_SCRIPT_URL, {
      method: "POST",
      body: JSON.stringify(payload)
    });
  } catch (err) {
    console.log("Sheet Error:", err);
  }
}

async function submitQuiz(auto = false) {
  const name = document.getElementById("username").value.trim();

  if (!name) {
    alert("Please enter your name");
    return;
  }

  clearInterval(timerInterval);

  // âœ… SHOW BLUR + LOADING
  document.getElementById("loadingOverlay").style.display = "flex";

  const score = calculateScore();

  await sendToGoogleSheet(name, score);

  alert("Test submitted successfully");

  window.location.href = "https://google.com"; 

  if (auto) alert("Time Up! Quiz Auto Submitted.");
}

document.getElementById("submitBtn")
  .addEventListener("click", () => submitQuiz());
if (checkExamTime()) {
  loadQuizFromXML();
  startTimer();
}

const now = new Date();

if (now < EXAM_START) {
  startPreExamCountdown();
} else {
  loadQuizFromXML();
  startTimer();
}
</script>

</body>
</html>








