<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quiz App</title>

  <style>
   
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif;
  background: #f0f2f5;
  display: flex;
  justify-content: center;
  padding: 20px;
}

/* ===== MAIN CONTAINER ===== */

.quiz-box {
  background: white;
  width: 100%;
  max-width: 520px;
  border-radius: 14px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.08);
  padding: 15px;
}

/* ===== STICKY HEADER ===== */

#timer {
  position: sticky;
  top: 0;
  background: white;
  padding: 12px;
  font-weight: bold;
  font-size: 18px;
  color: #e63946;
  text-align: center;
  border-bottom: 1px solid #eee;
  z-index: 10;
}

/* ===== NAME INPUT ===== */

input[type="text"] {
  width: 100%;
  padding: 12px;
  margin: 10px 0 15px 0;
  border-radius: 10px;
  border: 1px solid #ddd;
  font-size: 15px;
  outline: none;
}

input[type="text"]:focus {
  border-color: #457b9d;
}

/* ===== QUESTION CARD ===== */

.question {
  background: #fafafa;
  border: 1px solid #eee;
  border-radius: 12px;
  padding: 12px;
  margin-bottom: 12px;
  transition: 0.2s;
}

.question:hover {
  box-shadow: 0 4px 10px rgba(0,0,0,0.05);
}

.question p {
  font-weight: 600;
  margin-bottom: 10px;
  font-size: 15px;
}

/* ===== OPTIONS ===== */

label {
  display: block;
  padding: 8px 10px;
  border-radius: 8px;
  margin-bottom: 6px;
  cursor: pointer;
  transition: 0.15s;
  border: 1px solid transparent;
}

label:hover {
  background: #edf6f9;
  border-color: #dceef5;
}

input[type="radio"] {
  margin-right: 8px;
  transform: scale(1.1);
}

/* ===== BUTTON ===== */

button {
  width: 100%;
  padding: 14px;
  margin-top: 10px;
  border: none;
  border-radius: 10px;
  background: #1d3557;
  color: white;
  font-size: 16px;
  font-weight: bold;
  cursor: pointer;
  transition: 0.2s;
}

button:hover {
  background: #16324f;
}

/* ===== RESULT TEXT ===== */

#result {
  margin-top: 15px;
  text-align: center;
  font-weight: bold;
  font-size: 16px;
  color: #2a9d8f;
}

/* ===== MOBILE TUNING ===== */

@media (max-width: 600px) {

  body {
    padding: 10px;
  }

  .quiz-box {
    border-radius: 10px;
    padding: 10px;
  }

  #timer {
    font-size: 16px;
    padding: 10px;
  }

  .question p {
    font-size: 14px;
  }

  label {
    font-size: 14px;
  }

  button {
    font-size: 15px;
  }
}
  </style>
</head>
<body>

<div class="quiz-box">
  <h2>PSI Wireless Mocktest-1</h2>

  <!-- âœ… NAME INPUT -->
  <input type="text" id="username" placeholder="Enter your Full name">

  <div id="timer">Time: 180 Minutes </div>
  <form id="quizForm"></form>
  <button id="submitBtn">Submit Quiz</button>
  <div id="result"></div>
</div>

<!-- âœ… XML QUESTIONS (Editable) -->
<script id="quizData" type="text/xml">
<quiz>
  <question>
    <text>What is the capital of India?</text>
    <option correct="false">Mumbai</option>
    <option correct="false">Chennai</option>
    <option correct="true">New Delhi</option>
    <option correct="false">Kolkata</option>
  </question>

  <question>
    <text>Which language runs in browser?</text>
    <option correct="false">Python</option>
    <option correct="true">JavaScript</option>
    <option correct="false">C++</option>
    <option correct="false">Java</option>
  </question>

  <question>
    <text>2 + 2 = ?</text>
    <option correct="false">3</option>
    <option correct="true">4</option>
    <option correct="false">5</option>
    <option correct="false">6</option>
  </question>

  <question>
    <text>HTML stands for?</text>
    <option correct="true">HyperText Markup Language</option>
    <option correct="false">HighText Machine Language</option>
    <option correct="false">Hyper Tool Multi Language</option>
    <option correct="false">None</option>
  </question>

  <question>
    <text>Which is NOT programming language?</text>
    <option correct="false">Java</option>
    <option correct="false">Python</option>
    <option correct="true">HTML</option>
    <option correct="false">C</option>
  </question>

  <question>
    <text>What is the capital of India?</text>
    <option correct="false">Mumbai</option>
    <option correct="false">Chennai</option>
    <option correct="true">New Delhi</option>
    <option correct="false">Kolkata</option>
  </question>

  <question>
    <text>Which language runs in browser?</text>
    <option correct="false">Python</option>
    <option correct="true">JavaScript</option>
    <option correct="false">C++</option>
    <option correct="false">Java</option>
  </question>

  <question>
    <text>2 + 2 = ?</text>
    <option correct="false">3</option>
    <option correct="true">4</option>
    <option correct="false">5</option>
    <option correct="false">6</option>
  </question>

  <question>
    <text>HTML stands for?</text>
    <option correct="true">HyperText Markup Language</option>
    <option correct="false">HighText Machine Language</option>
    <option correct="false">Hyper Tool Multi Language</option>
    <option correct="false">None</option>
  </question>

  <question>
    <text>Which is NOT programming language?</text>
    <option correct="false">Java</option>
    <option correct="false">Python</option>
    <option correct="true">HTML</option>
    <option correct="false">C</option>
  </question>

  
</quiz>
</script>

<script>
/* ================= CONFIG ================= */

const QUIZ_TIME_SECONDS = 60; // â± Change timer here
const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxJdMp_3SIPVI5L5kIJAsbkp3T9LdG1JkzIdOKO6WET1RBX2EJI3L4or2VVkXWX0wLF/exec"; 
// ðŸ”— Paste Apps Script Web App URL here

/* ========================================== */

let questions = [];
let timeLeft = QUIZ_TIME_SECONDS;
let timerInterval;

function loadQuizFromXML() {
  const xmlText = document.getElementById("quizData").textContent;
  const parser = new DOMParser();
  const xml = parser.parseFromString(xmlText, "text/xml");

  const qNodes = xml.querySelectorAll("question");
  const form = document.getElementById("quizForm");

  qNodes.forEach((qNode, index) => {
    const text = qNode.querySelector("text").textContent;
    const options = qNode.querySelectorAll("option");

    const qObj = { text: text, options: [] };

    const div = document.createElement("div");
    div.className = "question";
    div.innerHTML += `<p>${index + 1}. ${text}</p>`;

    options.forEach((optNode, i) => {
      const optText = optNode.textContent;
      const isCorrect = optNode.getAttribute("correct") === "true";

      qObj.options.push({ text: optText, correct: isCorrect });

      div.innerHTML += `
        <label>
          <input type="radio" name="q${index}" value="${i}">
          ${optText}
        </label><br>
      `;
    });

    questions.push(qObj);
    form.appendChild(div);
  });
}

function startTimer() {
  timerInterval = setInterval(() => {
    timeLeft--;

    const minutes = String(Math.floor(timeLeft / 60)).padStart(2, '0');
    const seconds = String(timeLeft % 60).padStart(2, '0');

    document.getElementById("timer").textContent =
      `Time: ${minutes}:${seconds}`;

    if (timeLeft <= 0) {
      clearInterval(timerInterval);
      submitQuiz(true);
    }
  }, 1000);
}

function calculateScore() {
  let score = 0;

  questions.forEach((q, index) => {
    const selected = document.querySelector(`input[name="q${index}"]:checked`);
    if (!selected) return;

    if (q.options[selected.value].correct) score++;
  });

  return score;
}

async function sendToGoogleSheet(name, score) {
  if (!GOOGLE_SCRIPT_URL.includes("http")) return;

  const payload = { name: name, score: score };

  try {
    await fetch(GOOGLE_SCRIPT_URL, {
      method: "POST",
      body: JSON.stringify(payload)
    });
  } catch (err) {
    console.log("Sheet Error:", err);
  }
}

async function submitQuiz(auto = false) {
  const name = document.getElementById("username").value.trim();

  if (!name) {
    alert("Please enter your name");
    return;
  }

  clearInterval(timerInterval);

  const score = calculateScore();

  document.getElementById("result").textContent =
    `Name: ${name} | Score: ${score}`;

  await sendToGoogleSheet(name, score);

  if (auto) alert("Time Up! Quiz Auto Submitted.");
}

document.getElementById("submitBtn")
  .addEventListener("click", () => submitQuiz());

loadQuizFromXML();
startTimer();
</script>

</body>
</html>



